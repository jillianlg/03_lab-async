testing write file with a promise chain